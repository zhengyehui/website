# 优化 Next.js 构建配置

## 🚀 如果构建太慢，可以优化配置

### 方法一：禁用不必要的功能（开发阶段）

编辑 `next.config.js`：

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    domains: ['images.ctfassets.net'],
  },
  // 开发阶段可以禁用这些以加速构建
  typescript: {
    // 如果类型检查太慢，可以暂时忽略（不推荐生产环境）
    // ignoreBuildErrors: true,
  },
  eslint: {
    // 如果 ESLint 检查太慢，可以暂时忽略
    // ignoreDuringBuilds: true,
  },
}

module.exports = nextConfig
```

### 方法二：增加内存限制

如果内存不足导致构建慢：

```bash
# Windows PowerShell
$env:NODE_OPTIONS="--max-old-space-size=4096"
npm run build

# 或创建 .env 文件添加
NODE_OPTIONS=--max-old-space-size=4096
```

### 方法三：检查 Contentful 连接

如果构建时尝试连接 Contentful 但超时，可以：

1. **确保 Contentful 配置正确**
2. **或者暂时禁用 Contentful 调用**（仅用于测试构建）

在 `app/page.tsx` 中临时修改：

```typescript
export default async function Home() {
  // 临时禁用，测试构建
  const posts: Post[] = []; // await getPosts(3);
  
  return (
    <div>
      <Hero />
      <About />
      <Services />
      <News posts={posts} />
    </div>
  );
}
```

## ⏱️ 正常构建时间参考

- **小型项目**（5-10 个页面）：2-5 分钟
- **中型项目**（10-20 个页面）：5-10 分钟
- **大型项目**（20+ 页面）：10-20 分钟

你的项目应该属于小型项目，**3-5 分钟是正常的**。

## 🔍 如何判断是否卡住

### 正常情况
- 终端有持续输出
- 看到 "Compiling /page ..." 等信息
- CPU 使用率较高

### 卡住的情况
- 超过 15 分钟没有任何输出
- CPU 使用率为 0
- 终端完全静止

## 💡 建议

**如果已经运行了 5-10 分钟**：
- 这是正常的，继续等待
- 检查终端是否有新的输出
- 如果看到 "Compiling" 信息，说明正在工作

**如果超过 15 分钟**：
- 检查是否有错误信息
- 查看任务管理器中的 Node.js 进程是否在运行
- 如果确实卡住了，按 Ctrl+C 停止，然后清理缓存重新构建

